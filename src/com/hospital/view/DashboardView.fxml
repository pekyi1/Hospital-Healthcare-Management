<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.chart.*?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.hospital.controller.DashboardController"
            fitToWidth="true"
            styleClass="scroll-pane">

    <VBox spacing="30.0" style="-fx-background-color: #f4f6f8;">
        <padding>
            <Insets top="30" right="30" bottom="30" left="30"/>
        </padding>

        <!-- Header -->
        <VBox spacing="5">
            <Label fx:id="lblDashboardWelcome" text="Welcome back, Admin ðŸ‘‹" styleClass="header-label"/>
            <Label text="Here is the latest update for the last 7 days." styleClass="header-sublabel"/>
        </VBox>

        <!-- Stats Cards Container -->
        <HBox spacing="20.0" alignment="CENTER_LEFT">
            <!-- Total Patients Card (Blue Gradient) -->
            <VBox styleClass="stat-card, stat-card-blue" prefWidth="250" prefHeight="140" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ‘¥" style="-fx-font-size: 32px; -fx-text-fill: white;"/>
                    <VBox spacing="2">
                        <Label text="Total Patients" styleClass="stat-card-title"/>
                        <Label fx:id="patientCountLabel" text="0" styleClass="stat-card-value"/>
                    </VBox>
                </HBox>
                <Label text="Registered in system" styleClass="stat-card-subtitle"/>
            </VBox>

            <!-- Total Doctors Card (Green Gradient) -->
            <VBox styleClass="stat-card, stat-card-green" prefWidth="250" prefHeight="140" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <SVGPath content="M17 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm-3 14h-4v-4H6v-4h4V5h4v4h4v4h-4v4z" fill="white" scaleX="1.3" scaleY="1.3"/>
                    <VBox spacing="2">
                        <Label text="Total Doctors" styleClass="stat-card-title"/>
                        <Label fx:id="doctorCountLabel" text="0" styleClass="stat-card-value"/>
                    </VBox>
                </HBox>
                <Label text="Medical professionals" styleClass="stat-card-subtitle"/>
            </VBox>

            <!-- Appointments Card (Purple Gradient) -->
            <VBox styleClass="stat-card, stat-card-purple" prefWidth="250" prefHeight="140" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ“…" style="-fx-font-size: 32px; -fx-text-fill: white;"/>
                    <VBox spacing="2">
                        <Label text="Appointments" styleClass="stat-card-title"/>
                        <Label fx:id="appointmentCountLabel" text="0" styleClass="stat-card-value"/>
                    </VBox>
                </HBox>
                <Label text="Total scheduled" styleClass="stat-card-subtitle"/>
            </VBox>

            <!-- Departments Card (Orange Gradient) -->
            <VBox styleClass="stat-card, stat-card-orange" prefWidth="250" prefHeight="140" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ¥" style="-fx-font-size: 32px; -fx-text-fill: white;"/>
                    <VBox spacing="2">
                        <Label text="Departments" styleClass="stat-card-title"/>
                        <Label fx:id="departmentCountLabel" text="0" styleClass="stat-card-value"/>
                    </VBox>
                </HBox>
                <Label text="Active departments" styleClass="stat-card-subtitle"/>
            </VBox>
        </HBox>

        <!-- Charts Section -->
        <HBox spacing="20" VBox.vgrow="ALWAYS">
            <!-- Bar Chart -->
            <VBox styleClass="card" HBox.hgrow="ALWAYS" spacing="10">
                <Label text="Patient Statistics" styleClass="card-title"/>
                <BarChart fx:id="patientChart" legendVisible="false" verticalGridLinesVisible="false">
                    <xAxis>
                        <CategoryAxis label="Day"/>
                    </xAxis>
                    <yAxis>
                        <NumberAxis label="Patients" tickUnit="1"/>
                    </yAxis>
                </BarChart>
            </VBox>

            <!-- Pie Chart or Side Widget -->
            <VBox styleClass="card" prefWidth="300" spacing="10">
                <Label text="Departments" styleClass="card-title"/>
                <PieChart fx:id="departmentChart" clockwise="true" labelsVisible="false"/>
                <Label text="Surgery, Dermatology, etc." style="-fx-text-fill: #95a5a6; -fx-alignment: center;" maxWidth="Infinity"/>
            </VBox>
        </HBox>

        <!-- Quick Actions Footer -->
        <FlowPane hgap="15" vgap="15">
             <Button text="Register Patient" onAction="#goToPatients" styleClass="action-button"/>
             <Button text="New Appointment" onAction="#goToAppointments" styleClass="action-button"/>
        </FlowPane>

    </VBox>

</ScrollPane>
