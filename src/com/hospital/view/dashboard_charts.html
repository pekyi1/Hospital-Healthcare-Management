<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Charts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: transparent;
        }
        .chart-container {
            display: flex;
            gap: 20px;
            padding: 10px;
            height: 100vh;
        }
        .chart-card {
            flex: 1;
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 15px;
        }
        .chart-wrapper {
            position: relative;
            height: calc(100% - 40px);
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <div class="chart-card">
            <div class="chart-title">Patient Statistics</div>
            <div class="chart-wrapper">
                <canvas id="barChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-title">Departments</div>
            <div class="chart-wrapper">
                <canvas id="pieChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Bar Chart - Patient Statistics
        let barChart = null;
        let pieChart = null;

        // Initialize charts with empty data (will be populated from Java)
        function initCharts() {
            const barCtx = document.getElementById('barChart').getContext('2d');
            const pieCtx = document.getElementById('pieChart').getContext('2d');

            // Bar Chart Configuration
            barChart = new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Patients Registered',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(249, 115, 22, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(236, 72, 153, 0.8)',
                            'rgba(20, 184, 166, 0.8)',
                            'rgba(245, 158, 11, 0.8)'
                        ],
                        borderColor: [
                            'rgb(59, 130, 246)',
                            'rgb(16, 185, 129)',
                            'rgb(249, 115, 22)',
                            'rgb(139, 92, 246)',
                            'rgb(236, 72, 153)',
                            'rgb(20, 184, 166)',
                            'rgb(245, 158, 11)'
                        ],
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            cornerRadius: 8
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1,
                                color: '#64748b',
                                font: { size: 12 }
                            },
                            grid: {
                                color: 'rgba(226, 232, 240, 0.8)',
                                drawBorder: false
                            }
                        },
                        x: {
                            ticks: {
                                color: '#64748b',
                                font: { size: 12 }
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Pie Chart Configuration
            pieChart = new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.85)',
                            'rgba(16, 185, 129, 0.85)',
                            'rgba(249, 115, 22, 0.85)',
                            'rgba(139, 92, 246, 0.85)',
                            'rgba(236, 72, 153, 0.85)',
                            'rgba(20, 184, 166, 0.85)',
                            'rgba(245, 158, 11, 0.85)'
                        ],
                        borderColor: 'white',
                        borderWidth: 3,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        animateRotate: true,
                        animateScale: true,
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                pointStyle: 'circle',
                                font: { size: 12 },
                                color: '#475569'
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            cornerRadius: 8
                        }
                    },
                    cutout: '55%'
                }
            });
        }

        // Function called from Java to update bar chart data
        function updateBarChart(mon, tue, wed, thu, fri, sat, sun) {
            if (barChart) {
                barChart.data.datasets[0].data = [mon, tue, wed, thu, fri, sat, sun];
                barChart.update('default');
            }
        }

        // Function called from Java to update pie chart data
        function updatePieChart(labelsJson, valuesJson) {
            if (pieChart) {
                const labels = JSON.parse(labelsJson);
                const values = JSON.parse(valuesJson);
                pieChart.data.labels = labels;
                pieChart.data.datasets[0].data = values;
                pieChart.update('default');
            }
        }

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', initCharts);
    </script>
</body>
</html>
